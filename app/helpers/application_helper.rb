module ApplicationHelper
  def bookmarklet_for_user(user)
    'javascript: var execute = function (text) { var xmlHttpReq=new XMLHttpRequest(); xmlHttpReq.open("POST","http://localhost:3000/reader/create_post",true);	xmlHttpReq.setRequestHeader("Content-Type","application/x-www-form-urlencoded");	var note = document.getElementById("readertron-textarea").value;	var query="";	query+="&note="+note;	query+="&type=regular";query+="&url="+window.location.href;	query+="&title="+document.title;query+="&token=' + user.share_token + '";	query+="&content="+encodeURIComponent(text);xmlHttpReq.send(query);};var text=window.getSelection();var objRange=text.getRangeAt(0);var objClone=objRange.cloneContents();var objDiv=document.createElement("div");objDiv.appendChild(objClone);text=objDiv.innerHTML;var div = document.createElement("div");div.style.position ="fixed";div.style.zIndex = "99999";div.style.width = "500px";div.style.height = "200px";div.style.backgroundColor = "white";div.style.border = "1px solid black";div.style.top = "10px";div.style.right = "10px";var form = document.createElement("form");var textarea = document.createElement("textarea");textarea.style.width = "450px";textarea.style.height = "100px";textarea.style.margin = "20px 0px 20px 25px";textarea.style.padding = "5px";textarea.id = "readertron-textarea";var submit = document.createElement("input");submit.type = "submit";submit.value = "Note in Readertron";submit.style.marginLeft = "20px";submit.onclick = function() { execute(text) };form.appendChild(textarea);form.appendChild(submit);div.appendChild(form);document.body.appendChild(div);'
  end
end